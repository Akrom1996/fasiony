datasource db {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model WebsiteUrls {
  id        Int      @id @default(autoincrement())
  url       String   @unique
  name      String?
  createdAt DateTime @default(now())
}

model Items {
  id         Int            @id @default(autoincrement())
  itemName   String         @unique
  details    String?
  imageUrl   String?
  highlights String[]
  variance   ItemVariance[]
  prices     Prices[]
}

model Prices {
  id       Int        @id @default(autoincrement())
  price    String?
  dateTime DateTime?  @default(now())
  itemsId  Int
  item     Items      @relation(fields: [itemsId], references: [id])
  // websiteId     Int
  websites Websites[] //@relation(fields: [websiteId], references: [id])
}

model ItemVariance {
  id           Int                      @id @default(autoincrement())
  varianceName String                   @unique
  itemsId      Int
  item         Items                    @relation(fields: [itemsId], references: [id])
  websites     ItemVarianceOnWebsites[]
}

model Websites {
  id           Int                      @id @default(autoincrement())
  url          String                   @unique
  itemVariance ItemVarianceOnWebsites[]
  priceId      Int?
  price        Prices?                  @relation(fields: [priceId], references: [id])
  // itemPrices    ItemPricesOnWebsites[]
}

model ItemVarianceOnWebsites {
  id             Int          @default(autoincrement())
  websites       Websites     @relation(fields: [websitesId], references: [id])
  websitesId     Int // relation scalar field (used in the `@relation` attribute above)
  itemVariance   ItemVariance @relation(fields: [itemVarianceId], references: [id])
  itemVarianceId Int // relation scalar field (used in the `@relation` attribute above)
  price          String
  dateTime       DateTime     @default(now())

  @@id([websitesId, itemVarianceId, dateTime])
}

// model ItemPricesOnWebsites {
//   id             Int          @default(autoincrement())
//   websites       Websites     @relation(fields: [websitesId], references: [id])
//   websitesId     Int // relation scalar field (used in the `@relation` attribute above)
//   itemPrice      Prices @relation(fields: [itemPriceId], references: [id])
//   itemPriceId Int // relation scalar field (used in the `@relation` attribute above)
//   price          String
//   dateTime       DateTime     @default(now())

//   @@id([websitesId, itemPriceId, dateTime])
// }
